--- origsrc/gnome-settings-daemon-3.22.1/configure.ac	2017-03-07 11:14:40.730991400 -0600
+++ src/gnome-settings-daemon-3.22.1/configure.ac	2017-03-07 11:16:45.144395900 -0600
@@ -210,7 +210,7 @@ dnl ------------------------------------
 dnl - media-keys plugin stuff
 dnl ---------------------------------------------------------------------------
 
-PKG_CHECK_MODULES(MEDIA_KEYS, [gio-unix-2.0 libpulse >= $PA_REQUIRED_VERSION $GUDEV_PKG libpulse-mainloop-glib >= $PA_REQUIRED_VERSION libcanberra-gtk3 upower-glib >= $UPOWER_REQUIRED_VERSION])
+PKG_CHECK_MODULES(MEDIA_KEYS, [gio-unix-2.0 libpulse >= $PA_REQUIRED_VERSION $GUDEV_PKG libpulse-mainloop-glib >= $PA_REQUIRED_VERSION libcanberra-gtk3])
 PKG_CHECK_MODULES(GVC, [gobject-2.0 libpulse >= $PA_REQUIRED_VERSION libpulse-mainloop-glib >= $PA_REQUIRED_VERSION $ALSA_PKG])
 AM_CONDITIONAL(HAVE_INTROSPECTION, false)
 
@@ -218,7 +218,7 @@ dnl ------------------------------------
 dnl - xrandr plugin stuff
 dnl ---------------------------------------------------------------------------
 
-PKG_CHECK_MODULES(XRANDR, [gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION upower-glib >= $UPOWER_REQUIRED_VERSION])
+PKG_CHECK_MODULES(XRANDR, [gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION])
 
 dnl ---------------------------------------------------------------------------
 dnl - orientation plugin stuff
@@ -232,38 +232,6 @@ dnl ------------------------------------
 
 PKG_CHECK_MODULES(SOUND, [libpulse >= $PA_REQUIRED_VERSION $GUDEV_PKG libpulse-mainloop-glib >= $PA_REQUIRED_VERSION])
 
-# ---------------------------------------------------------------------------
-# Power
-# ---------------------------------------------------------------------------
-PKG_CHECK_MODULES(POWER, upower-glib >= $UPOWER_REQUIRED_VERSION gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION $GUDEV_PKG libcanberra-gtk3 libnotify x11 xext xtst)
-
-if test x$have_gudev != xno; then
-	PKG_CHECK_MODULES(BACKLIGHT_HELPER,
-		glib-2.0 >= $GLIB_REQUIRED_VERSION
-		gudev-1.0
-	)
-fi
-
-dnl ---------------------------------------------------------------------------
-dnl - color
-dnl ---------------------------------------------------------------------------
-
-PKG_CHECK_MODULES(COLOR, [colord >= 1.0.2 gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED_VERSION libcanberra-gtk3 lcms2 >= $LCMS_REQUIRED_VERSION])
-
-dnl ---------------------------------------------------------------------------
-dnl - datetime
-dnl ---------------------------------------------------------------------------
-
-AC_CHECK_LIBM
-AC_SUBST(LIBM)
-
-PKG_CHECK_MODULES(DATETIME,
-        libgeoclue-2.0 >= $GEOCLUE_REQUIRED_VERSION
-	geocode-glib-1.0 >= $GEOCODE_GLIB_REQUIRED_VERSION
-	gweather-3.0 >= $LIBGWEATHER_REQUIRED_VERSION
-	polkit-gobject-1 >= $POLKIT_REQUIRED_VERSION
-)
-
 dnl ---------------------------------------------------------------------------
 dnl - wacom (disabled for s390/s390x and non Linux platforms)
 dnl ---------------------------------------------------------------------------
--- origsrc/gnome-settings-daemon-3.22.1/plugins/Makefile.am	2015-07-03 08:31:43.000000000 -0500
+++ src/gnome-settings-daemon-3.22.1/plugins/Makefile.am	2017-03-07 11:16:58.885517400 -0600
@@ -4,10 +4,7 @@ enabled_plugins =	\
 	a11y-keyboard	\
 	a11y-settings	\
 	clipboard	\
-	color		\
-	datetime	\
 	dummy		\
-	power		\
 	housekeeping    \
 	keyboard	\
 	media-keys	\
--- origsrc/gnome-settings-daemon-3.22.1/plugins/media-keys/gsd-media-keys-manager.c	2017-03-07 11:14:40.457944800 -0600
+++ src/gnome-settings-daemon-3.22.1/plugins/media-keys/gsd-media-keys-manager.c	2017-03-07 11:19:33.361557000 -0600
@@ -39,7 +39,9 @@
 #include <gio/gdesktopappinfo.h>
 #include <gio/gunixfdlist.h>
 
+#if 0
 #include <libupower-glib/upower.h>
+#endif
 #include <gdesktop-enums.h>
 
 #ifdef HAVE_GUDEV
@@ -168,6 +170,7 @@ struct GsdMediaKeysManagerPrivate
         char            *icon_theme;
         char            *gtk_theme;
 
+#if 0
         /* Power stuff */
         GSettings       *power_settings;
         GDBusProxy      *power_proxy;
@@ -175,6 +178,7 @@ struct GsdMediaKeysManagerPrivate
         GDBusProxy      *power_keyboard_proxy;
         UpDevice        *composite_device;
         char            *chassis_type;
+#endif
 
         /* Shell stuff */
         GsdShell        *shell_proxy;
@@ -1867,6 +1871,7 @@ do_toggle_contrast_action (GsdMediaKeysM
 	}
 }
 
+#if 0
 static void
 power_action (GsdMediaKeysManager *manager,
               const char          *action,
@@ -2059,6 +2064,24 @@ do_battery_action (GsdMediaKeysManager *
 
         g_free (icon_name);
 }
+#else
+static void
+do_config_power_button_action (GsdMediaKeysManager *manager,
+                               gboolean             in_lock_screen)
+{}
+static void
+do_config_power_action (GsdMediaKeysManager *manager,
+                        GsdPowerActionType   action_type,
+                        gboolean             in_lock_screen)
+{}
+static void
+do_brightness_action (GsdMediaKeysManager *manager,
+                      MediaKeyType type)
+{}
+static void
+do_battery_action (GsdMediaKeysManager *manager)
+{}
+#endif
 
 static gboolean
 get_rfkill_property (GsdMediaKeysManager *manager,
@@ -2775,9 +2798,11 @@ start_media_keys_idle_cb (GsdMediaKeysMa
           g_hash_table_new_full (g_str_hash, g_str_equal,
                                  g_free, g_object_unref);
 
+#if 0
         /* for the power plugin interface code */
         manager->priv->power_settings = g_settings_new (SETTINGS_POWER_DIR);
         manager->priv->chassis_type = gnome_settings_get_chassis_type ();
+#endif
 
         /* Logic from http://git.gnome.org/browse/gnome-shell/tree/js/ui/status/accessibility.js#n163 */
         manager->priv->interface_settings = g_settings_new (SETTINGS_INTERFACE_DIR);
@@ -2892,15 +2917,17 @@ gsd_media_keys_manager_stop (GsdMediaKey
 
         g_clear_object (&priv->logind_proxy);
         g_clear_object (&priv->settings);
+#if 0
         g_clear_object (&priv->power_settings);
         g_clear_object (&priv->power_proxy);
         g_clear_object (&priv->power_screen_proxy);
         g_clear_object (&priv->power_keyboard_proxy);
         g_clear_object (&priv->composite_device);
+        g_clear_pointer (&priv->chassis_type, g_free);
+#endif
         g_clear_object (&priv->mpris_controller);
         g_clear_object (&priv->screencast_proxy);
         g_clear_object (&priv->iio_sensor_proxy);
-        g_clear_pointer (&priv->chassis_type, g_free);
 
         if (priv->cancellable != NULL) {
                 g_cancellable_cancel (priv->cancellable);
@@ -3086,6 +3113,7 @@ xrandr_ready_cb (GObject             *so
         }
 }
 
+#if 0
 static void
 power_ready_cb (GObject             *source_object,
                 GAsyncResult        *res,
@@ -3133,6 +3161,7 @@ power_keyboard_ready_cb (GObject
                 g_error_free (error);
         }
 }
+#endif
 
 static void
 on_bus_gotten (GObject             *source_object,
@@ -3141,7 +3170,9 @@ on_bus_gotten (GObject             *sour
 {
         GDBusConnection *connection;
         GError *error = NULL;
+#if 0
         UpClient *up_client;
+#endif
 
         connection = g_bus_get_finish (res, &error);
         if (connection == NULL) {
@@ -3170,6 +3201,7 @@ on_bus_gotten (GObject             *sour
                           (GAsyncReadyCallback) xrandr_ready_cb,
                           manager);
 
+#if 0
         g_dbus_proxy_new (manager->priv->connection,
                           G_DBUS_PROXY_FLAGS_NONE,
                           NULL,
@@ -3203,6 +3235,7 @@ on_bus_gotten (GObject             *sour
         up_client = up_client_new ();
         manager->priv->composite_device = up_client_get_display_device (up_client);
         g_object_unref (up_client);
+#endif
 }
 
 static void
--- origsrc/gnome-settings-daemon-3.22.1/plugins/xrandr/gsd-xrandr-manager.c	2015-05-22 10:06:01.000000000 -0500
+++ src/gnome-settings-daemon-3.22.1/plugins/xrandr/gsd-xrandr-manager.c	2017-03-07 11:19:33.366550800 -0600
@@ -36,7 +36,9 @@
 #include <gio/gio.h>
 #include <gdk/gdk.h>
 #include <gtk/gtk.h>
+#if 0
 #include <libupower-glib/upower.h>
+#endif
 
 #define GNOME_DESKTOP_USE_UNSTABLE_API
 
@@ -92,7 +94,9 @@ struct GsdXrandrManagerPrivate {
         GnomeRRScreen *rw_screen;
         gboolean running;
 
+#if 0
         UpClient *upower_client;
+#endif
 
         GSettings       *settings;
         GDBusNodeInfo   *introspection_data;
@@ -457,7 +461,11 @@ config_is_all_off (GnomeRRConfig *config
 static gboolean
 laptop_lid_is_closed (GsdXrandrManager *manager)
 {
+#if 0
         return up_client_get_lid_is_closed (manager->priv->upower_client);
+#else
+        return FALSE;
+#endif
 }
 
 static gboolean
@@ -1225,7 +1233,9 @@ on_rr_screen_acquired (GObject      *obj
                 return;
         }
 
+#if 0
         manager->priv->upower_client = up_client_new ();
+#endif
 
         log_msg ("State of screen at startup:\n");
         log_screen (manager->priv->rw_screen);
@@ -1280,11 +1290,13 @@ gsd_xrandr_manager_stop (GsdXrandrManage
                 manager->priv->rw_screen = NULL;
         }
 
+#if 0
         if (manager->priv->upower_client != NULL) {
                 g_signal_handlers_disconnect_by_data (manager->priv->upower_client, manager);
                 g_object_unref (manager->priv->upower_client);
                 manager->priv->upower_client = NULL;
         }
+#endif
 
         if (manager->priv->name_id != 0)
                 g_bus_unown_name (manager->priv->name_id);
